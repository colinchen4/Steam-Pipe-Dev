{"version":"0.1.0","name":"steampipe","instructions":[{"name":"initializeUser","accounts":[{"name":"user","isMut":true,"isSigner":true},{"name":"owner","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"linkSteamAccount","accounts":[{"name":"user","isMut":true,"isSigner":false},{"name":"owner","isMut":false,"isSigner":true}],"args":[{"name":"steamId","type":"string"}]},{"name":"createListing","accounts":[{"name":"user","isMut":true,"isSigner":false},{"name":"listing","isMut":true,"isSigner":true},{"name":"owner","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"itemId","type":"string"},{"name":"price","type":"u64"},{"name":"itemName","type":"string"}]},{"name":"updateListing","accounts":[{"name":"listing","isMut":true,"isSigner":false},{"name":"seller","isMut":false,"isSigner":true}],"args":[{"name":"newPrice","type":"u64"}]},{"name":"cancelListing","accounts":[{"name":"user","isMut":true,"isSigner":false},{"name":"listing","isMut":true,"isSigner":false},{"name":"owner","isMut":false,"isSigner":true},{"name":"seller","isMut":false,"isSigner":false}],"args":[]},{"name":"purchase","accounts":[{"name":"listing","isMut":true,"isSigner":false},{"name":"buyer","isMut":true,"isSigner":true},{"name":"escrow","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"escrowBump","type":"u8"}]},{"name":"completeTrade","accounts":[{"name":"listing","isMut":true,"isSigner":false},{"name":"escrow","isMut":true,"isSigner":false},{"name":"seller","isMut":true,"isSigner":false},{"name":"buyer","isMut":false,"isSigner":true}],"args":[]},{"name":"cancelTrade","accounts":[{"name":"listing","isMut":true,"isSigner":false},{"name":"escrow","isMut":true,"isSigner":false},{"name":"buyer","isMut":true,"isSigner":true}],"args":[]}],"accounts":[{"name":"User","type":{"kind":"struct","fields":[{"name":"owner","type":"publicKey"},{"name":"steamId","type":"string"},{"name":"steamLinked","type":"bool"},{"name":"tradesCount","type":"u64"}]}},{"name":"Listing","type":{"kind":"struct","fields":[{"name":"seller","type":"publicKey"},{"name":"itemId","type":"string"},{"name":"itemName","type":"string"},{"name":"price","type":"u64"},{"name":"state","type":{"defined":"ListingState"}},{"name":"createdAt","type":"i64"}]}},{"name":"Escrow","type":{"kind":"struct","fields":[{"name":"listing","type":"publicKey"},{"name":"buyer","type":"publicKey"},{"name":"seller","type":"publicKey"},{"name":"amount","type":"u64"},{"name":"createdAt","type":"i64"},{"name":"bump","type":"u8"}]}}],"types":[{"name":"ListingState","type":{"kind":"enum","variants":[{"name":"Active"},{"name":"InEscrow"},{"name":"Completed"},{"name":"Cancelled"}]}}],"events":[{"name":"ListingCreatedEvent","fields":[{"name":"listingId","type":"publicKey","index":false},{"name":"seller","type":"publicKey","index":false},{"name":"itemId","type":"string","index":false},{"name":"price","type":"u64","index":false},{"name":"createdAt","type":"i64","index":false}]},{"name":"ListingUpdatedEvent","fields":[{"name":"listingId","type":"publicKey","index":false},{"name":"newPrice","type":"u64","index":false}]},{"name":"ListingCancelledEvent","fields":[{"name":"listingId","type":"publicKey","index":false},{"name":"seller","type":"publicKey","index":false}]},{"name":"PurchaseInitiatedEvent","fields":[{"name":"listingId","type":"publicKey","index":false},{"name":"escrowAccount","type":"publicKey","index":false},{"name":"buyer","type":"publicKey","index":false},{"name":"amount","type":"u64","index":false},{"name":"timestamp","type":"i64","index":false}]},{"name":"TradeCompletedEvent","fields":[{"name":"listingId","type":"publicKey","index":false},{"name":"escrowAccount","type":"publicKey","index":false},{"name":"buyer","type":"publicKey","index":false},{"name":"seller","type":"publicKey","index":false},{"name":"amount","type":"u64","index":false},{"name":"timestamp","type":"i64","index":false}]},{"name":"TradeCancelledEvent","fields":[{"name":"listingId","type":"publicKey","index":false},{"name":"escrowAccount","type":"publicKey","index":false},{"name":"buyer","type":"publicKey","index":false},{"name":"seller","type":"publicKey","index":false},{"name":"amount","type":"u64","index":false},{"name":"timestamp","type":"i64","index":false}]}],"errors":[{"code":6000,"name":"InvalidPrice","msg":"Price must be greater than 0"},{"code":6001,"name":"InvalidListingState","msg":"Listing is not in the correct state for this operation"},{"code":6002,"name":"InvalidEscrowAccount","msg":"Invalid escrow account"},{"code":6003,"name":"SteamAlreadyLinked","msg":"Steam account is already linked"},{"code":6004,"name":"Unauthorized","msg":"You are not authorized to perform this action"}]}
